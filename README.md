# RestakingHook

## 1. Overview

**RestakingHook** is a Uniswap v4 Hook that automatically restakes ETH when a liquidity position is inactive. It enhances yield generation by diverting idle ETH to a restaking contract and redistributing rewards to LPs based on a simulated APR model.

### Problem it solves:
- It ensures that idle liquidity is effectively utilized, generating rewards even when liquidity positions are inactive.

### How it works:
- The contract checks the status of the liquidity position and, if inactive, diverts ETH to a restaking contract (e.g., Lido).
- The rewards generated by the restaked ETH are then redistributed to liquidity providers (LPs).

## 2. Architecture

### Contract interactions:
- **BaseHook**: Inherited by RestakingHook to manage the liquidity.
- **Uniswap v4 PoolManager**: Interacts with Uniswap's pool to add/remove liquidity.
- **Restaking contracts (Lido)**: Interacts with external restaking contracts to maximize yield generation from idle ETH.

### Data structures used:
- **PoolKey**: Identifies the liquidity pool.
- **IPoolManager.ModifyLiquidityParams**: Parameters for liquidity adjustments.
- **Position**: Tracks user liquidity and restaking data.

### How liquidity, fees, and rewards are managed:
- Liquidity is added or removed based on the pool‚Äôs activity.
- ETH is restaked automatically when not in use.
- Rewards from restaked ETH are tracked and distributed to LPs.

## 3. Benefits

- **Maximized Yield**: By restaking idle liquidity, users earn additional rewards from their ETH even when it isn't actively contributing to a liquidity pool.
- **Automated Process**: The restaking of ETH happens automatically, reducing manual intervention for liquidity providers and ensuring they are always earning.
- **Increased Transparency**: Future integration with AVS ensures that LPs can track their rewards and liquidity status with full transparency.
- **Efficient Liquidity Utilization**: Idle liquidity is redirected into yield-generating contracts, improving the efficiency of capital use in the ecosystem.


## üìå 4. How It Works (Use Cases) ##
Explain step-by-step how the contract behaves in different situations.
üí° Example Use Case: Adding Liquidity
1Ô∏è‚É£ User provides ETH & USDC in a Uniswap pool.
2Ô∏è‚É£ Contract checks if the position is active or inactive.
If active, liquidity is added normally.
If inactive, ETH is diverted to restaking.
3Ô∏è‚É£ The user's position and rewards are updated.
4Ô∏è‚É£ Restaked ETH generates yield over time, which is later distributed.
Provide flow diagrams or example transactions for clarity.

## 5. Example Workflow

1. A liquidity provider deposits ETH into a Uniswap v4 pool.
2. The liquidity provider's position becomes inactive due to low pool activity.
3. RestakingHook checks the position‚Äôs status and identifies that the liquidity is idle.
4. The smart contract automatically diverts the idle ETH to a restaking contract like Lido.
5. Rewards from restaked ETH are generated and automatically redistributed back to the liquidity provider.
6. The liquidity provider can see the rewards and status of their position via the platform's dashboard.

## 6. Future Improvements

Our goal: Making liquidity providing profitable in any market condition

Integration with Othentic‚Äôs AVS component ensures transparent and verifiable liquidity management, proving that user funds are handled securely and in accordance with our operational standards.
Flash Accounting automatically returns liquidity to the pool as soon as the user's range is active, ensuring a seamless and instant liquidity management experience.

